# ===================================
# Database Configuration
# ===================================

# Local PostgreSQL (Docker)
DATABASE_URL=postgresql://postgres:postgres@localhost:5432/codincod_dev
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres
POSTGRES_DB=codincod_dev
DATABASE_POOL_SIZE=10

# Cloud PostgreSQL (Production - example)
# DATABASE_URL=postgresql://user:pass@your-db.example.com:5432/codincod_prod?ssl=true
# DATABASE_SSL=true
# DATABASE_IPV6=false

# Test Database
TEST_DATABASE_URL=postgresql://postgres:postgres@localhost:5433/codincod_test

# ===================================
# MongoDB (Legacy - for migration)
# ===================================

MONGO_URI=mongodb://codincod-dev:hunter2@localhost:27017
MONGO_DB_NAME=codincod-development
MONGO_USERNAME=codincod-dev
MONGO_PASSWORD=hunter2

# ===================================
# Phoenix Application
# ===================================

# Generate with: mix phx.gen.secret
SECRET_KEY_BASE=your_secret_key_base_here_at_least_64_chars_long_generate_with_mix_phx_gen_secret

PHX_HOST=localhost
PHX_PORT=4000
PHX_SERVER=true

# URLs
FRONTEND_URL=http://localhost:5173
BACKEND_URL=http://localhost:4000

# ===================================
# Authentication & Security
# ===================================

# Bcrypt work factor (higher = more secure but slower)
BCRYPT_ROUNDS=12

# JWT Configuration
JWT_SECRET=your_jwt_secret_here
JWT_EXPIRY=7d
JWT_ISSUER=codincod_api

# Session Configuration
SESSION_SIGNING_SALT=your_session_signing_salt_here
SESSION_ENCRYPTION_SALT=your_session_encryption_salt_here
SESSION_TTL_DAYS=14
PASSWORD_RESET_TTL_HOURS=1
EMAIL_CONFIRMATION_TTL_HOURS=24

# ===================================
# External Services
# ===================================

# Piston API (Code Execution)
PISTON_URI=http://localhost:2000

# Redis (Caching & Rate Limiting)
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=redis_password
REDIS_DATABASE=0

# ===================================
# CORS Configuration
# ===================================

CORS_ALLOWED_ORIGINS=http://localhost:5173,http://localhost:3000

# ===================================
# Email Configuration (Swoosh)
# ===================================

# For development (using local adapter)
MAILER_ADAPTER=local

# For production (example with SendGrid)
# MAILER_ADAPTER=sendgrid
# SENDGRID_API_KEY=your_sendgrid_api_key_here
# MAILER_FROM_EMAIL=noreply@codincod.com
# MAILER_FROM_NAME=CodinCod

# ===================================
# Background Jobs (Oban)
# ===================================

OBAN_ENABLED=true
OBAN_QUEUES_DEFAULT=10
OBAN_QUEUES_MAILER=5
OBAN_QUEUES_EVENTS=20

# ===================================
# Rate Limiting
# ===================================

RATE_LIMIT_ENABLED=true
RATE_LIMIT_PER_MINUTE=60
RATE_LIMIT_LOGIN_PER_HOUR=5

# ===================================
# Logging & Monitoring
# ===================================

LOG_LEVEL=info

# Sentry (optional - for production error tracking)
# SENTRY_DSN=https://your_sentry_dsn_here

# ===================================
# Development & Testing
# ===================================

MIX_ENV=dev
NODE_ENV=development
